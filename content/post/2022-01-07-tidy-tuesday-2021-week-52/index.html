---
title: "Tidy Tuesday 2021 Week 52"
author: "Steven DiFalco"
date: '2022-01-07'
output:
  html_document:
    df_print: paged
disable_jquery: no
draft: no
featured: no
image:
  caption: ''
  focal_point: ''
  preview_only: no
lastmod: '2022-01-07T16:04:23-05:00'
categories:
- data visualization
- TidyTuesday
projects: [TidyTuesday]
slug: tidy-tuesday-2021-week-52
subtitle: ''
summary: ''
tags:
- data visualizations
- TidyTuesday
authors: []
---



<div id="this-is-my-contribution-for-tidytuesday-after-a-long-time-of-not-participating." class="section level3">
<h3>This is my contribution for #TidyTuesday, after a long time of not participating.</h3>
</div>
<div id="i-created-an-interactive-plot-using-ggplot-and-plotly-packages-that-compares-the-calories-vs-caffeine-content-of-starbucks-drinks.-its-not-functioning-to-add-to-this-blog-post-so-ill-keep-trying-to-figure-that-out." class="section level3">
<h3>I created an interactive plot using <code>ggplot</code> and <code>plotly</code> packages that compares the calories vs caffeine content of Starbucks drinks. It’s not functioning to add to this blog post, so I’ll keep trying to figure that out.</h3>
<p><img src="feature.png" /></p>
<div id="code-below" class="section level4">
<h4>code below:</h4>
<pre class="r"><code>#TidyTuesday 2021, Week 52

library(tidytuesdayR)
library(dplyr)
library(ggplot2)
library(plotly)
library(htmlwidgets)

#read in data
tuesdata &lt;- tidytuesdayR::tt_load(&#39;2021-12-21&#39;)

#load data to starbucks variable
starbucks &lt;- tuesdata$starbucks

#group by product name and create a max_cal to calories:
starbucks &lt;- starbucks %&gt;%
  group_by(product_name) %&gt;%
  mutate(max_serv_size = max(serv_size_m_l), max_cal = max(calories))

#create dateframe with simplified starbucks data.
plot_df &lt;- starbucks %&gt;%
  filter(serv_size_m_l == max_serv_size &amp; calories == max_cal) %&gt;%
  group_by(product_name) %&gt;%
  slice(1) %&gt;%
  filter(size != &quot;1 scoop&quot;)

#create plot for caffeine vs calories
a = ggplot(plot_df, aes(x=max_cal, y=caffeine_mg))+
  geom_point(aes(color = max_cal))+
  scale_color_gradient2(low=&quot;green&quot;, mid = &quot;grey&quot;, high = &quot;red&quot;, midpoint = 300)+
  labs(x= &quot;Calories&quot;, y= &quot;Caffeine(mg)&quot;, title= &quot;Calories vs Caffeine content in Starbucks Drinks&quot;)+
  geom_mark_rect(aes(filter = max_cal &gt; 600, label = &quot;Hot chocolate drinks&quot;), alpha=0, show.legend = F, color = &quot;brown&quot;) +
  geom_mark_rect(aes(filter = caffeine_mg &lt; 45 &amp; max_cal &lt; 10, label = &quot;Caffeine free teas&quot;), alpha=0, show.legend = F, color = &quot;green&quot;)+
  theme_classic()

#create interactive plot
interactive = ggplotly(a)

#save as html to view widget
saveWidget(as_widget(a), &quot;plotly.html&quot;,selfcontained = F )</code></pre>
</div>
</div>
